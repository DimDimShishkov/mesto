import{Card}from"./Card.js";import{config,FormValidator}from"./FormValidator.js";import"../pages/index.css";var page=document.querySelector(".page"),profile=page.querySelector(".profile"),profileInfo=profile.querySelector(".profile__info"),editButton=profileInfo.querySelector(".profile__edit-button"),addImageButton=profile.querySelector(".profile__add-button"),profileName=profileInfo.querySelector(".profile__name"),profileDescription=profileInfo.querySelector(".profile__description"),popupInformacion=page.querySelector(".popup_type_info"),popupFormInfo=popupInformacion.querySelector(".popup__form_type_info"),profileNameEdit=document.getElementById("edit-name"),profileDescriptionEdit=document.getElementById("edit-description"),popupImages=page.querySelector(".popup_type_images"),popupFormImages=popupImages.querySelector(".popup__form_type_images"),elementsTextEdit=document.getElementById("image-name"),elementsImageEdit=document.getElementById("image-link"),elementsSection=page.querySelector(".elements"),popupImageContainer=document.querySelector(".popup_type_image"),popupImageDescription=popupImageContainer.querySelector(".popup__description"),popupImage=popupImageContainer.querySelector(".popup__image");export var openPopup=function(e){e.classList.add("popup_opened"),page.classList.add("page_active"),document.addEventListener("keydown",handleEscape)};var closePopup=function(e){e.classList.remove("popup_opened"),page.classList.remove("page_active"),document.removeEventListener("keydown",handleEscape)},handleProfileFormSubmit=function(e){e.preventDefault(),closePopup(popupInformacion),profileName.textContent=profileNameEdit.value,profileDescription.textContent=profileDescriptionEdit.value};popupFormInfo.addEventListener("submit",handleProfileFormSubmit),editButton.addEventListener("click",(function(e){e.preventDefault(),openPopup(popupInformacion),profileNameEdit.value=profileName.textContent,profileDescriptionEdit.value=profileDescription.textContent,formValidators.info.resetValidation()}));var popups=Array.from(document.querySelectorAll(".popup"));popups.forEach((function(e){e.addEventListener("mousedown",(function(o){o.target.classList.contains("popup_opened")&&closePopup(e),o.target.classList.contains("popup__exit-button")&&closePopup(e)}))}));var handleEscape=function(e){if("Escape"===e.key){var o=document.querySelector(".popup_opened");closePopup(o)}};addImageButton.addEventListener("click",(function(e){e.preventDefault(),openPopup(popupImages),formValidators.images.resetValidation()}));var handleCardClick=function(e,o){popupImageDescription.textContent=o,popupImage.src=e,popupImage.alt=o,openPopup(popupImageContainer)},createCard=function(e,o){return new Card(e,o,".image-template",handleCardClick).generateCard()},handleImagesFormSubmit=function(e){var o=createCard(elementsTextEdit.value,elementsImageEdit.value);elementsSection.prepend(o),e.preventDefault(),closePopup(popupImages),e.target.reset()};popupFormImages.addEventListener("submit",handleImagesFormSubmit);var initialCards=[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}];initialCards.forEach((function(e){var o=createCard(e.name,e.link);elementsSection.prepend(o)}));var formValidators={},enableValidation=function(e){Array.from(document.querySelectorAll(".".concat(e.formSelector))).forEach((function(o){var t=new FormValidator(e,o),p=o.getAttribute("name");formValidators[p]=t,t.enableValidation()}))};enableValidation(config);